<div class="row justify-content-center bar-image">
  <div class="container-page">
    <div class="container-page-headers">
      <h1><%= @cocktail.name %></h1>

      <div>
        <%= link_to cocktails_path(anchor: "container-cards") do %>
          <i class="fas fa-undo-alt"></i>
        <% end %>

        <% if @cocktail.editable %>
          <%= link_to edit_cocktail_path, data: { toggle: "modal", target: "#ModalEditCocktail" }, style: "margin: 0 10px" do %>
            <i class="fas fa-edit"></i>
          <% end %>
          <%= link_to cocktail_path(@cocktail), method: :delete, data: {confirm: "Are you sure?"}, style: "margin-right: 10px" do %>
            <i class="fas fa-trash-alt"></i>
          <% end %>
          <%= link_to cocktail_path(editable: 1) do %>
            <i class="fas fa-save"></i>
          <% end %>
        <% end %>
      </div>
    </div>

    <div style="display: flex">
      <!-- Cocktail Image -->
      <div style="background-image: url('<%= cl_image_path @cocktail.photo.key, height: 380, width: 380, crop: :fill %>'); min-height: 380px; min-width: 380px; padding: 0; border-radius: 5px"></div>

      <!-- Cocktail Information -->
      <div class="container-general" style="margin-left: 20px; width: 100%">
        <h3 style="margin: 0 0 16px 20px; text-indent: -15px">General Information</h3>

        <table style="width: 100%">
          <tr>
            <td style="width: 90px"><p style="text-align: end">Category</p></td>
            <td style="width: 15px"></td>
            <td><p><%= @cocktail.category.name %></p></td>
          </tr>
          <tr>
            <td><p style="text-align: end">Alcoholic</p></td>
            <td></td>
            <td><p><%= @cocktail.alcoholic %></p></td>
          </tr>
            <td><p style="text-align: end">Rating</p></td>
            <td></td>
            <td><p><%= @cocktail.reviews.empty? ? "NA" : @cocktail.rating_average.round(1).to_s + " â˜…" %></p></td>
          <tr>
          </tr>
          <tr>
            <td><p style="text-align: end">Difficulty</p></td>
            <td></td>
            <td><p><%= @cocktail.difficulty %></p></td>
          </tr>
          <tr>
            <td><p style="text-align: end">Reviews</p></td>
            <td></td>
            <td><p><%= @cocktail.reviews.size %></p></td>
          </tr>
          <tr>
            <td><p style="text-align: end">Glass</p></td>
            <td></td>
            <td><p><%= @cocktail.glass.name %></p></td>
          </tr>
        </table>
      </div>
    </div>

    <div class="container-general" id="doses-list" style="margin: 20px 0 10px">
      <%= render "doses/doses-list" %>
    </div>

    <div class="container-general" id="instructions-list" style="margin: 10px 0; padding: 10px 20px">
      <div style="display: flex">
        <h3>Instructions</h3>

        <% if @cocktail.editable %>
          <%= link_to "New Instructions", data: { toggle: "modal", target: "#ModalAddInstructions" }, class: "white-icon" do %>
            <i class="fas fa-edit"></i>
          <% end %>
        <% end %>
      </div>

      <!-- Display the Instructions -->
      <% if @cocktail.instructions == "NA" || @cocktail.instructions.empty? %>
        <p style="margin: 10px; font-size: 14px">No instructions avaliable...</p>
      <% else %>
        <p style="margin-left: 10px; font-size: 14px; text-align: justify"><%= @cocktail.instructions %></p>
      <% end %>
    </div>

    <ul class="container-general" id="reviews-list" style="margin: 10px 0; padding: 10px 20px">
      <%= render "reviews/reviews-list" %>
    </ul>
  </div>
</div>


<!-- Modal Create Review -->
<div class="modal fade" id="ModalNewReview" role="dialog">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h4 class="modal-title">New Review</h4>
        <button type="button" class="close" data-dismiss="modal">&times;</button>
      </div>

      <div class="modal-body">
        <%= render "reviews/form-new" %>
      </div>
    </div>
  </div>
</div>

<!-- Modal Create Dose -->
<div class="modal fade" id="ModalNewDose" role="dialog">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h4 class="modal-title">New Dose</h4>
        <button type="button" class="close" data-dismiss="modal">&times;</button>
      </div>

      <div class="modal-body">
        <%= render "doses/form-new" %>
      </div>
    </div>
  </div>
</div>

<!-- Modal Edit Instructions -->
<div class="modal fade" id="ModalAddInstructions" role="dialog">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h4 class="modal-title">New Instructions</h4>
        <button type="button" class="close" data-dismiss="modal">&times;</button>
      </div>

      <div class="modal-body">
        <%= render "cocktails/form-add-instructions" %>
      </div>
    </div>
  </div>
</div>

<!-- Modal Edit Cocktail -->
<div class="modal fade" id="ModalEditCocktail" role="dialog">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h4 class="modal-title">Edit Cocktail</h4>
        <button type="button" class="close" data-dismiss="modal">&times;</button>
      </div>

      <div class="modal-body">
        <%= render "cocktails/form-edit" %>
      </div>
    </div>
  </div>
</div>
